{% assign product = all_products[section.settings.product] %}

<div class="product-accordion">
  {% if product.metafields.custom.material %}
    <div class="accordion-item">
      <button class="accordion-toggle" type="button" aria-expanded="false">Material</button>
      <div class="accordion-content" hidden>
        {{ product.metafields.custom.material | metafield_tag }}
      </div>
    </div>
  {% endif %}

  {% if product.metafields.custom.delivery %}
    <div class="accordion-item">
      <button class="accordion-toggle" type="button" aria-expanded="false">Delivery</button>
      <div class="accordion-content" hidden>
        {{ product.metafields.custom.delivery | metafield_tag }}
      </div>
    </div>
  {% endif %}
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.accordion-toggle').forEach((button) => {
      button.addEventListener('click', () => {
        const content = button.nextElementSibling;
        const expanded = button.getAttribute('aria-expanded') === 'true';
        button.setAttribute('aria-expanded', !expanded);
        content.hidden = expanded;
      });
    });
  });
</script>
